---
import { addAgent } from "../../backend.mjs";

let message = "";
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addAgent(formData);
    message = response.message;
}
---

<Base titre="Ajouter un agent">
    <h1 class="text-xl font-semibold mb-4">Ajouter un agent</h1>
    <a class="hover:text-lime-500" href="/agent">Retour à la liste des agents</a
    >

    <p>{message}</p>

    <form
        action="/agent/add"
        method="POST"
        class="bg-white p-6 rounded-lg shadow-md w-full max-w-lg mx-auto space-y-4"
    >
        <input
            type="text"
            name="nom"
            placeholder="Nom"
            required
            class="w-full p-2 border border-gray-300 rounded-md"
        />
        <input
            type="text"
            name="prenom"
            placeholder="Prénom"
            required
            class="w-full p-2 border border-gray-300 rounded-md"
        />
        <input
            type="email"
            name="E_mail"
            placeholder="Email"
            required
            class="w-full p-2 border border-gray-300 rounded-md"
        />
        <button
            type="submit"
            class="w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition"
        >
            Ajouter
        </button>
    </form>
</Base>
